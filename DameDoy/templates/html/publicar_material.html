{% extends 'html/base.html' %}
{% load static %}

{% block title %}Publicar Material{% endblock %}

{% block styles %}
<link rel="stylesheet" href="{% static 'css/publicar_material.css' %}">
{% endblock %}

{% block content %}
<div class="publicar-container">
    <h1>Publicar Nuevo Material</h1>
    
    <form method="post" enctype="multipart/form-data" class="material-form" id="formMaterial">
        {% csrf_token %}
        
        {% if messages %}
        <div class="alert alert-error">
            {% for message in messages %}
            <div>{{ message }}</div>
            {% endfor %}
        </div>
        {% endif %}

        <div class="form-grid">
            <div class="form-group">
                <label for="titulo">Título <span class="required">*</span></label>
                <input type="text" 
                       id="titulo" 
                       name="titulo" 
                       class="form-control"
                       required 
                       minlength="3"
                       maxlength="200"
                       placeholder="Ingresa el título del material">
            </div>

            <div class="form-group">
                <label for="tipo">Tipo de Material <span class="required">*</span></label>
                <select id="tipo" 
                        name="tipo" 
                        class="form-control"
                        required>
                    <option value="">Selecciona un tipo</option>
                    <option value="apunte">Apunte</option>
                    <option value="examen">Examen</option>
                    <option value="proyecto">Proyecto</option>
                    <option value="libro">Libro</option>
                    <option value="otros">Otros</option>
                </select>
            </div>

            <div class="form-group">
                <label for="facultad">Facultad <span class="required">*</span></label>
                <input type="text" 
                       id="facultad" 
                       name="facultad" 
                       class="form-control"
                       required 
                       maxlength="100"
                       placeholder="Nombre de la facultad">
            </div>

            <div class="form-group">
                <label for="carrera">Carrera <span class="required">*</span></label>
                <input type="text" 
                       id="carrera" 
                       name="carrera" 
                       class="form-control"
                       required 
                       maxlength="100"
                       placeholder="Nombre de la carrera">
            </div>

            <div class="form-group">
                <label for="materia">Materia <span class="required">*</span></label>
                <input type="text" 
                       id="materia" 
                       name="materia" 
                       class="form-control"
                       required 
                       maxlength="100"
                       placeholder="Nombre de la materia">
            </div>

            <div class="form-group">
                <label for="docente">Docente <span class="required">*</span></label>
                <input type="text" 
                       id="docente" 
                       name="docente" 
                       class="form-control"
                       required 
                       maxlength="100"
                       placeholder="Nombre del docente">
            </div>

            <div class="form-group full-width">
                <label for="descripcion">Descripción <span class="required">*</span></label>
                <textarea id="descripcion" 
                          name="descripcion" 
                          class="form-control"
                          required 
                          rows="4"
                          minlength="10"
                          placeholder="Describe el contenido del material"></textarea>
            </div>

            <div class="form-group">
                <label for="precio">Precio <span class="required">*</span></label>
                <input type="number" 
                       id="precio" 
                       name="precio" 
                       class="form-control"
                       required 
                       min="0" 
                       step="0.01"
                       placeholder="0.00">
            </div>

            <div class="form-group file-input">
                <label for="imagen">Imagen del Material <span class="required">*</span></label>
                <div class="imagen-preview" id="imagenPreview"></div>
                <input type="file" 
                       id="imagen" 
                       name="imagen" 
                       class="form-control"
                       required 
                       accept="image/*">
                <small class="help-text">Formatos permitidos: JPG, PNG. Máximo 5MB</small>
            </div>
        </div>

        <div class="form-actions">
            <button type="submit" class="btn-publicar">
                <i class="fas fa-paper-plane"></i> Publicar Material
            </button>
            <a href="{% url 'lista_materiales' %}" class="btn-cancelar">
                <i class="fas fa-times"></i> Cancelar
            </a>
        </div>
    </form>
</div>

{% block scripts %}
<script src="{% static 'js/publicar_material.js' %}"></script>
{% endblock %}

{% endblock %}